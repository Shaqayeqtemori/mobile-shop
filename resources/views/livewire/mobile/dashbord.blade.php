<div >


<main class="lg:w-[700px] xl:w-[1400px] lg:h-[700px] xl:h-[1400px] mx-auto p-4 sm:p-6 font-yekan">

 <section class="grid grid-cols-1 lg:grid-cols-3 gap-5">
 
    <aside class="col-span-1 space-y-5">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-5">
      
        <div class="card-anim  bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-2 "style="border-color: rgba(9, 72, 238, 0.25);">
                <div class=" flex items-end justify-between">
          <p class="text-[12px] font-bold">تعداد کاربران</p>
     <svg class="bg-pink-100 p-1 rounded-full" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.16006 10.87C9.06006 10.86 8.94006 10.86 8.83006 10.87C6.45006 10.79 4.56006 8.84 4.56006 6.44C4.56006 3.99 6.54006 2 9.00006 2C11.4501 2 13.4401 3.99 13.4401 6.44C13.4301 8.84 11.5401 10.79 9.16006 10.87Z" stroke="#FF00D4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M16.41 4C18.35 4 19.91 5.57 19.91 7.5C19.91 9.39 18.41 10.93 16.54 11C16.46 10.99 16.37 10.99 16.28 11" stroke="#FF00D4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4.15997 14.56C1.73997 16.18 1.73997 18.82 4.15997 20.43C6.90997 22.27 11.42 22.27 14.17 20.43C16.59 18.81 16.59 16.17 14.17 14.56C11.43 12.73 6.91997 12.73 4.15997 14.56Z" stroke="#FF00D4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M18.3401 20C19.0601 19.85 19.7401 19.56 20.3001 19.13C21.8601 17.96 21.8601 16.03 20.3001 14.86C19.7501 14.44 19.0801 14.16 18.3701 14" stroke="#FF00D4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </div>
        <h3 class="text-sm mt-12 font-bold">10</h3>
        </div>
      </div>

      <!-- کارت ضرر ماهوار -->
      <div class="card-anim bg-gray-200/50 shadow-[0px_4px_4px_0px_#00000040] rounded-xl border-r-4 border-b-4 border-blue-500 p-5" style="border-color: rgba(9,72,238,0.15);">
        <div class="flex items-center gap-2">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.1201 5.84992V7.91992" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M12 5.85023V9.99023" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M6.87988 5.84982L6.87988 12.0698" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M6.88012 18.1499L7.34012 17.6099C9.89012 14.6299 13.3101 12.5199 17.1201 11.5699" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
            <path d="M9.81006 18.1499H6.88006V15.2299" stroke="#E30000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2Z" stroke="#E30000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h3 class="font-bold">ضرر ماهوار</h3>
        </div>
        <h3 class="text-sm mt-12 font-bold">200</h3>
        </div>
                <div class="card-anim bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-2 "style="border-color: rgba(9, 72, 238, 0.25);">
                <div class=" flex items-end justify-between">
          <p class=" text-[12px] font-bold"> قرضه ها</p>
          <svg class="bg-red-200 p-1 rounded-full" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 13.7502C9.5 14.7202 10.25 15.5002 11.17 15.5002H13.05C13.85 15.5002 14.5 14.8202 14.5 13.9702C14.5 13.0602 14.1 12.7302 13.51 12.5202L10.5 11.4702C9.91 11.2602 9.51001 10.9402 9.51001 10.0202C9.51001 9.18023 10.16 8.49023 10.96 8.49023H12.84C13.76 8.49023 14.51 9.27023 14.51 10.2402" stroke="#FF0004" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 7.5V16.5" stroke="#FF0004" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2" stroke="#FF0004" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M22 6V2H18" stroke="#FF0004" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 7L22 2" stroke="#FF0004" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </div>
<<<<<<< HEAD
        <h3 class="text-xl mt-8 font-bold"></h3>
=======
        <h3 class="text-sm mt-8 font-bold">75000؋</h3>
>>>>>>> a3d068ec432630c213462c5e142331bb50beb7c7
        </div>
        <div class="card-anim bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-2 "style="border-color: rgba(9, 72, 238, 0.25);">
                <div class=" flex items-end justify-between">
          <p class=" text-sm"> مشتریان</p>
          <svg class="bg-purple-100 p-1 rounded-full" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M18.0001 7.16C17.9401 7.15 17.8701 7.15 17.8101 7.16C16.4301 7.11 15.3301 5.98 15.3301 4.58C15.3301 3.15 16.4801 2 17.9101 2C19.3401 2 20.4901 3.16 20.4901 4.58C20.4801 5.98 19.3801 7.11 18.0001 7.16Z" stroke="#5100FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M16.9699 14.4402C18.3399 14.6702 19.8499 14.4302 20.9099 13.7202C22.3199 12.7802 22.3199 11.2402 20.9099 10.3002C19.8399 9.59016 18.3099 9.35016 16.9399 9.59016" stroke="#5100FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M5.96998 7.16C6.02998 7.15 6.09998 7.15 6.15998 7.16C7.53998 7.11 8.63998 5.98 8.63998 4.58C8.63998 3.15 7.48998 2 6.05998 2C4.62998 2 3.47998 3.16 3.47998 4.58C3.48998 5.98 4.58998 7.11 5.96998 7.16Z" stroke="#5100FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M6.99994 14.4402C5.62994 14.6702 4.11994 14.4302 3.05994 13.7202C1.64994 12.7802 1.64994 11.2402 3.05994 10.3002C4.12994 9.59016 5.65994 9.35016 7.02994 9.59016" stroke="#5100FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12.0001 14.6302C11.9401 14.6202 11.8701 14.6202 11.8101 14.6302C10.4301 14.5802 9.33008 13.4502 9.33008 12.0502C9.33008 10.6202 10.4801 9.47021 11.9101 9.47021C13.3401 9.47021 14.4901 10.6302 14.4901 12.0502C14.4801 13.4502 13.3801 14.5902 12.0001 14.6302Z" stroke="#5100FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M9.09021 17.7804C7.68021 18.7204 7.68021 20.2603 9.09021 21.2003C10.6902 22.2703 13.3102 22.2703 14.9102 21.2003C16.3202 20.2603 16.3202 18.7204 14.9102 17.7804C13.3202 16.7204 10.6902 16.7204 9.09021 17.7804Z" stroke="#5100FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </div>
        <h3 class="text-sm mt-8 font-bold">100</h3>
        </div>
        <div class="card-anim bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-2 "style="border-color: rgba(9, 72, 238, 0.25);">
                <div class=" flex items-end justify-between">
          <p class=" text-[12px] font-bold"> درآمد روزانه</p>
 <svg class="bg-purple-200 p-1 rounded-full" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 13.7502C9.5 14.7202 10.25 15.5002 11.17 15.5002H13.05C13.85 15.5002 14.5 14.8202 14.5 13.9702C14.5 13.0602 14.1 12.7302 13.51 12.5202L10.5 11.4702C9.91 11.2602 9.51001 10.9402 9.51001 10.0202C9.51001 9.18023 10.16 8.49023 10.96 8.49023H12.84C13.76 8.49023 14.51 9.27023 14.51 10.2402" stroke="#31009B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 7.5V16.5" stroke="#31009B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2" stroke="#31009B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 3V7H21" stroke="#31009B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M22 2L17 7" stroke="#31009B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </div>
<<<<<<< HEAD
        <h3 class="text-xl mt-8 font-bold"></h3>
=======
        <h3 class="text-sm mt-8 font-bold">75000؋</h3>
>>>>>>> a3d068ec432630c213462c5e142331bb50beb7c7
        </div>
        <div class="card-anim bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-2 "style="border-color: rgba(9, 72, 238, 0.25);">
                <div class=" flex items-end justify-between">
          <p class="text-[12px] font-bold"> فایده روزانه</p>
          <svg class="bg-orange-200 p-1 rounded-full" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8.67188 14.3298C8.67188 15.6198 9.66188 16.6598 10.8919 16.6598H13.4019C14.4719 16.6598 15.3419 15.7498 15.3419 14.6298C15.3419 13.4098 14.8119 12.9798 14.0219 12.6998L9.99187 11.2998C9.20187 11.0198 8.67188 10.5898 8.67188 9.36984C8.67188 8.24984 9.54187 7.33984 10.6119 7.33984H13.1219C14.3519 7.33984 15.3419 8.37984 15.3419 9.66984" stroke="#FF4800" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 6V18" stroke="#FF4800" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#FF4800" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
        </div>
<<<<<<< HEAD
        <h3 class="text-xl mt-8 font-bold"></h3>
=======
        <h3 class="text-sm mt-8 font-bold">75000؋</h3>
>>>>>>> a3d068ec432630c213462c5e142331bb50beb7c7
        </div>
      </div>
    </div>

    <!-- کارت گراف دایره‌ای + خلاصه -->
    <div class="col-span-1 lg:col-span-2 card-anim  bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-5 "style="border-color: rgba(9, 72, 238, 0.25);">
      <div class="grid grid-cols-1 md:grid-cols-5 gap-6 items-center">

       
        <div class="md:col-span-3 space-y-5">
          <div>
            <h2 class="text-xl font-bold mb-4">گراف موبایل‌ها</h2>
            <H4 class="text-sm font-bold">تعداد مبایل ها نظر به دسته بندی:</H4>
            <ul class="space-y-3">
              <li class="flex items-center justify-between">
                <div class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded-full bg-accent"></span><span>جدید</span></div>
                <div class="flex-1 h-0 border-t-2 border-dashed border-gray-300" data-connector="1"></div>
                <div class="font-semibold" id="val-new">200</div>
                 
              </li>
              <li class="flex items-center justify-between">
                
              <div class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded-full bg-primary"></span><span>دسته دوم</span></div>
                <div class="flex-1 h-0 border-t-2 border-dashed border-gray-300" data-connector="1"></div>
              
              <div class="font-semibold" id="val-second">200</div>
              </li>
              <li class="flex items-center justify-between">
                <div class="flex items-center gap-2"><span class="inline-block w-3 h-3 rounded-full bg-skydeep"></span><span>برگشتی</span></div>
                <div class="flex-1 h-0 border-t-2 border-dashed border-gray-300" data-connector="1"></div>
               
                <div class="font-semibold" id="val-returns">200</div>
              </li>
            </ul>
          </div>
                <div class="flex-1 h-0 border-t-2 border-dashed border-gray-300" data-connector="1"></div>

          <div>
            <p class="font-semibold mb-2">درصدی مفاد یا ضرر:</p>
            <div class="grid grid-cols-3 gap-3 text-center text-sm">
                    <div class="rounded-xl  p-3"><p class="mb-1">جدید</p><span id="pct-new" class="font-bold bg-pink-200  text-accent">+50%</span></div>
                    <div class="rounded-xl  p-3"><p class="mb-1">دسته دوم</p><span id="pct-second" class="font-bold text-primary bg-purple-200">+50%</span></div>
                    <div class="rounded-xl  p-3"><p class="mb-1">برگشتی</p><span id="pct-returns" class="font-bold text-skydeep bg-sky-200 ">+50%</span></div>
            </div>
          </div>
        </div>
 <div class="md:col-span-2 flex justify-center">
          <svg class="ring-shadow" width="260" height="260" viewBox="0 0 260 260">
            <defs>
              <linearGradient id="gradPink" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#FF00C3"/>
                <stop offset="100%" stop-color="#FF4DFF"/>
              </linearGradient>
              <linearGradient id="gradBlue" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#6C5CE7"/>
                <stop offset="100%" stop-color="#00C2FF"/>
              </linearGradient>
              <linearGradient id="gradCyan" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#00C2FF"/>
                <stop offset="100%" stop-color="#6EE7FF"/>
              </linearGradient>
            </defs>
            <!-- پس زمینه حلقه‌ها -->
            <g transform="rotate(-90 130 130)" stroke-linecap="round" fill="none" stroke-width="16">
              <!-- Pink (جدید) -->
              <circle cx="130" cy="130" r="110" stroke="#F1F5F9"/>
              <circle id="ring-new" cx="130" cy="130" r="110" stroke="url(#gradPink)" stroke-dasharray="690 690" stroke-dashoffset="0"/>
              <!-- Blue (دسته دوم) -->
              <circle cx="130" cy="130" r="86" stroke="#F1F5F9"/>
              <circle id="ring-second" cx="130" cy="130" r="86" stroke="url(#gradBlue)" stroke-dasharray="540 540" stroke-dashoffset="0"/>
              <!-- Cyan (برگشتی) -->
              <circle cx="130" cy="130" r="62" stroke="#F1F5F9"/>
              <circle id="ring-returns" cx="130" cy="130" r="62" stroke="url(#gradCyan)" stroke-dasharray="390 390" stroke-dashoffset="0"/>
            </g>
          </svg>
          <span class="absolute top-1 left-1 text-[10px] font-bold text-pink-500">25.5%</span>
          <canvas class="absolute bottom-1 left-0 w-full h-[100%] userChart"></canvas>
        </div>
      </div>
    </div>

    <!-- نمودارها: ردیف پایین -->
    <div class="col-span-1 lg:col-span-3 grid grid-cols-1 lg:grid-cols-2 gap-5">
      <div class="card-anim bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-5 "style="border-color: rgba(9, 72, 238, 0.25);">
        <div class="flex items-center gap-2 ">
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.87988 18.1501V16.0801" stroke="#01BB04" stroke-width="1.5" stroke-linecap="round"/>
<path d="M12 18.1498V14.0098" stroke="#01BB04" stroke-width="1.5" stroke-linecap="round"/>
<path d="M17.1201 18.1502V11.9302" stroke="#01BB04" stroke-width="1.5" stroke-linecap="round"/>
<path d="M17.1199 5.8501L16.6599 6.3901C14.1099 9.3701 10.6899 11.4801 6.87988 12.4301" stroke="#01BB04" stroke-width="1.5" stroke-linecap="round"/>
<path d="M14.1899 5.8501H17.1199V8.7701" stroke="#01BB04" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z" stroke="#01BB04" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
          <h3 class="font-bold">مفاد ماهوار</h3>
         
        </div>
      </div>
      <div class="card-anim bg-white shadow-lg rounded-xl border-r-4 border-b-4 border-blue-500 p-5 "style="border-color: rgba(9, 72, 238, 0.25);">
        <div class="flex items-center gap-2">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17.1201 5.84992V7.91992" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
<path d="M12 5.85023V9.99023" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
<path d="M6.87988 5.84982L6.87988 12.0698" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
<path d="M6.88012 18.1499L7.34012 17.6099C9.89012 14.6299 13.3101 12.5199 17.1201 11.5699" stroke="#E30000" stroke-width="1.5" stroke-linecap="round"/>
<path d="M9.81006 18.1499H6.88006V15.2299" stroke="#E30000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2Z" stroke="#E30000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
          <h3 class="font-bold">ضرر ماهوار</h3>
     
        </div>
      </div>
    </div>


  </div>
</aside>

</main>

<style>
       


  .ring-shadow{filter: drop-shadow(0 8px 24px rgba(0,0,0,.08))}
  
  ::-webkit-scrollbar { height: 8px; width: 8px; }
  ::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 999px; }
  ::-webkit-scrollbar-track { background: transparent; }
  

  .ring-shadow { filter: drop-shadow(0 8px 24px rgba(0,0,0,.08)); }

  .card-anim {
    transition: all 0.4s ease;
  }
  .card-anim:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 10px 25px rgba(0,0,0,0.12);
  }


  ::-webkit-scrollbar { height: 8px; width: 8px; }
  ::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 999px; }
  ::-webkit-scrollbar-track { background: transparent; }

  
  @keyframes fadeUp {
    0% { opacity: 0; transform: translateY(30px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  .fade-up {
    animation: fadeUp 0.8s ease forwards;
  }

 
  @keyframes drawRing {
    from { stroke-dashoffset: 690; }
    to { stroke-dashoffset: 0; }
  }
  #ring-new, #ring-second, #ring-returns {
    animation: drawRing 1.8s ease-out forwards;
  }
      .card-anim { border-radius: 16px; box-shadow: 0 10px 20px rgba(17,24,39,0.06); }
    .chart-canvas { width:100%; height:160px; display:block; }
    .chartjs-render-monitor { display:block; 
    }
    .ring-shadow { filter: drop-shadow(0 8px 24px rgba(0,0,0,.08)); }
  .card-anim { transition: all 0.4s ease; }
  .card-anim:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 10px 25px rgba(0,0,0,0.12); }
  ::-webkit-scrollbar { height: 8px; width: 8px; }
  ::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 999px; }
  ::-webkit-scrollbar-track { background: transparent; }
</style>
 <style>
    body {
    background: #ffffff !important;
}
    .card { box-shadow: 0 8px 30px rgba(31,45,61,.08);
    box-shadow:0px 4px 4px 0px #00000040 #3B82F6
    }
    .legend-off { opacity: 0.5; }
    .draw {
      animation: draw 2s ease-in-out forwards;
    }
    @keyframes draw {
      0% { stroke-dasharray: 0, 1000; }
      100% { stroke-dasharray: 1000, 1000; }
    }
    .delay {
      animation: delay 2s ease-in-out forwards;
    }
    @keyframes delay {
      0% { stroke-dasharray: 0, 1000; }
      100% { stroke-dasharray: 1000, 1000; }
    }

    /* اصلاح گراف‌ها */
    .graph-container {
      background: #ffffff;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      height: 350px;
    }

  </style>
<script>
  const colors = [
      "#ff31d0", 
      "#3b82f6", 
      "#31009B", 
      "#FF4800", 
      "#0746F7",
      "#3A64D0",  
      "#5100FF",  
      "#0014AE"   
  ];

 document.querySelectorAll('.userChart').forEach((ctxEl, index) => {

    const ctx = ctxEl.getContext('2d');

    new Chart(ctx, {
        type: "line",
        data: {
            labels: ["0","0","1","3"],
            datasets: [{
                data: [2, 3, 1.5, 2.5],
                borderColor: colors[index % colors.length], 
                borderWidth: 1.6,
                pointRadius: 0,
                tension: 0.5,
                fill: false
            }]
        },
        options: {
            responsive: false,
            maintainAspectRatio: false,
            plugins: { legend: { display: false }, tooltip: { enabled: false }},
            scales: { x: { display: false }, y: { display: false, min:1.5, max:4 }},
            layout: { padding: 0 }
        }
    });
 });
</script>



<script>
const labels = ['حمل','ثور','جوزا','سرطان','اسد','سنبله','میزان','عقرب','قوس','جدی','دلو','حوت'];
const lossData = [700, 1100, 950, 1200, 600, 750, 900, 650, 800, 720, 850, 780];
const profitData = [1200, 1400, 1800, 2300, 2600, 2800, 3200, 3600, 3900, 4200, 4500, 4700];

const baseOptions = {
  responsive: true,
  maintainAspectRatio: false,
  interaction: { mode: 'nearest', axis: 'x', intersect: false },
  plugins: {
    legend: { display: false },
    tooltip: { enabled: true } 
  },
  scales: {
    x: { ticks: { color: '#9CA3AF' }, grid: { display: false } },
    y: { ticks: { color: '#9CA3AF' }, grid: { color: 'rgba(156,163,175,0.15)' } }
  }
};

function enableTickHover(chart, canvas) {
  const xScale = () => chart.scales?.x;
  const HIT_RADIUS = 8;

  function onMove(evt) {
    const rect = canvas.getBoundingClientRect();
    const x = evt.clientX - rect.left;
    const y = evt.clientY - rect.top;

    const xs = xScale();
    if (!xs) return;
    let labelAtPixel;
    try { labelAtPixel = xs.getValueForPixel(x); } catch(e) { labelAtPixel = null; }
    let index = -1;
    if (labelAtPixel !== undefined && labelAtPixel !== null) {
      index = labels.indexOf(labelAtPixel);
      if (index === -1 && typeof labelAtPixel === 'number') {
        index = Math.round(labelAtPixel);
        if (index < 0 || index >= labels.length) index = -1;
      }
    } else {
      const left = xs.left, width = xs.width;
      const ratio = (x - left) / width;
      if (ratio >= 0 && ratio <= 1) index = Math.round(ratio * (labels.length - 1));
    }

    if (index >= 0) {
      let tickPixelX;
      try { tickPixelX = xs.getPixelForValue(labels[index]); } catch(e) { tickPixelX = xs.left + (index / (labels.length - 1)) * xs.width; }
      if (Math.abs(x - tickPixelX) <= HIT_RADIUS) {
        const activeElements = [];
        for (let ds = 0; ds < chart.data.datasets.length; ds++) activeElements.push({ datasetIndex: ds, index: index });
        try { chart.tooltip.setActiveElements(activeElements, {x: tickPixelX, y: y}); } catch(e){ chart.setActiveElements(activeElements); }
        chart.update('none'); 
        return;
      }
    }
    try { chart.tooltip.setActiveElements([], {x:0,y:0}); } catch(e) { chart.setActiveElements([]); }
    chart.update('none');
  }

  function onLeave() { 
    try { chart.tooltip.setActiveElements([], {x:0,y:0}); } catch(e) { chart.setActiveElements([]); } 
    chart.update('none'); 
  }

  canvas.addEventListener('mousemove', onMove);
  canvas.addEventListener('mouseleave', onLeave);
}

(function() {
  const ctx = document.getElementById('lossChart').getContext('2d');
  const gradient = ctx.createLinearGradient(0,0,0,160);
  gradient.addColorStop(0, 'rgba(239,68,68,0.25)');
  gradient.addColorStop(1, 'rgba(239,68,68,0)');

  const lossChart = new Chart(ctx, {
    type: 'line',
    data: { labels, datasets:[{ label:'ضرر', data:lossData, fill:true, backgroundColor:gradient, borderColor:'rgba(239,68,68,0.9)', tension:0.4, pointRadius:0, borderWidth:2 }] },
    options: baseOptions
  });
  enableTickHover(lossChart, document.getElementById('lossChart'));
})();

(function() {
  const ctx = document.getElementById('profitChart').getContext('2d');
  const gradient = ctx.createLinearGradient(0,0,0,160);
  gradient.addColorStop(0, 'rgba(16,185,129,0.25)');
  gradient.addColorStop(1, 'rgba(16,185,129,0)');

  const profitChart = new Chart(ctx, {
    type: 'line',
    data: { labels, datasets:[{ label:'مفاد', data:profitData, fill:true, backgroundColor:gradient, borderColor:'rgba(16,185,129,0.95)', tension:0.35, pointRadius:0, borderWidth:2 }] },
    options: baseOptions
  });
  enableTickHover(profitChart, document.getElementById('profitChart'));
})();
</script>


</div>
